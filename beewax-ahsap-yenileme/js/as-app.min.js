$.ajaxSetup({
    headers: {
        "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content")
    }
}), $.fn.button.Constructor.DEFAULTS = {
    loadingText: "<i class='fa fa-circle-o-notch fa-spinner fa-spin'></i> <span>".concat(Lang.get("messages.please_wait"), "</span>")
}, "3.3.7" === $.fn.tooltip.Constructor.VERSION && ($.fn.tooltip.Constructor.DEFAULTS.container = "body"), String.prototype.format = String.prototype.format || function() {
    var n = arguments;
    return this.replace(/{(\d+)}/g, function(e, t) {
        return void 0 !== n[t] ? n[t] : e
    })
}, $.jMaskGlobals.translation = {
    1: {
        pattern: /\d/
    },
    9: {
        pattern: /\d/,
        optional: !0
    },
    "#": {
        pattern: /\d/,
        recursive: !0
    },
    A: {
        pattern: /[a-zA-Z0-9]/
    },
    S: {
        pattern: /[a-zA-Z]/
    }
};
var masks = {
        phone: "0 111 111 11 11"
    },
    makeMask = function() {
        $.each(masks, function(e, t) {
            $(".mask.".concat(e)).mask(t)
        })
    },
    makeSelect2 = function(e) {
        0 < o.closest(".modal").length ? "rtl" == $("html").attr("dir") ? e.select2({
            dropdownParent: o.closest(".modal"),
            dir: "rtl"
        }) : e.select2() : "rtl" == $("html").attr("dir") ? e.select2({
            dir: "rtl"
        }) : e.select2()
    },
    makeICheck = function(e) {
        $(e).iCheck({
            checkboxClass: "icheckbox_square-blue",
            radioClass: "iradio_square-blue"
        })
    },
    showYesNoSwal = function(e, t, n) {
        return swal({
            title: n || Lang.get("lang_v1.on_continue"),
            text: e,
            icon: "warning",
            buttons: {
                cancel: {
                    text: Lang.get("messages.cancel"),
                    visible: !0,
                    closeModal: !0
                },
                confirm: {
                    text: Lang.get("messages.yes"),
                    value: !0,
                    visible: !0,
                    closeModal: !0
                }
            },
            dangerMode: !0
        }).then(function(e) {
            e && t()
        }), !1
    },
    showDeleteSwal = function(a, i, o) {
        return swal({
            title: Lang.get("messages.sure"),
            text: Lang.get("messages.confirm_delete"),
            icon: "warning",
            buttons: {
                cancel: {
                    text: Lang.get("messages.cancel"),
                    visible: !0,
                    closeModal: !0
                },
                confirm: {
                    text: Lang.get("messages.yes"),
                    value: !0,
                    visible: !0,
                    closeModal: !0
                }
            },
            dangerMode: !0
        }).then(function(e) {
            if (e) {
                var t = a.href,
                    n = a.data || {};
                $.ajax({
                    method: "DELETE",
                    url: t,
                    dataType: "json",
                    data: n,
                    success: function(e) {
                        1 == e.success ? (toastr.success(e.msg || e.message), i && i.ajax.reload()) : messageInfo(e.msg || e.message), "function" == typeof o && o(e)
                    },
                    error: function(e, t, n) {
                        messageInfo(e.responseJSON.message)
                    }
                })
            }
        }), !1
    },
    _swalAlertDefault = {
        buttons: {
            close: {
                text: Lang.get("messages.close"),
                visible: !0,
                closeModal: !0
            }
        },
        dangerMode: !0
    },
    _makeSwalOFTYPE = function(e, t, n) {
        var a = {
                text: e,
                title: t || Lang.get("messages.alert"),
                icon: n || "warning"
            },
            i = $.extend(!0, {}, _swalAlertDefault, a);
        return swal(i)
    },
    showSwalAlert = function(e) {
        return _makeSwalOFTYPE(e)
    },
    showSwalError = function(e) {
        return _makeSwalOFTYPE(e, Lang.get("messages.error"), "danger")
    },
    showWaitSwal = function() {
        var e = document.createElement("span");
        e.innerHTML = "".concat(Lang.get("messages.loading_icon"), " ").concat(Lang.get("messages.processing")), swal({
            title: Lang.get("messages.please_wait"),
            content: e,
            closeOnClickOutside: !1,
            buttons: !1,
            closeOnEsc: !1
        })
    },
    errorLabel = '<label id="{0}-error" class="error" for="{0}">{1}</label>',
    createAjaxSubmitForm = function(e, t, s, r, n, a) {
        var c = $(e),
            l = c.find(".btn"),
            u = $.extend(!0, {
                method: "POST",
                dataType: "json"
            }, t),
            i = {
                invalidHandler: function(e, t) {
                    setTimeout(function() {
                        $.each(l, function() {
                            $(this).button("reset")
                        })
                    }, 1)
                },
                submitHandler: function(e, t) {
                    t.preventDefault();
                    var n = c.serialize();
                    c.find("label.error").remove();
                    var a = {
                            url: c.attr("action"),
                            data: n,
                            success: function(e) {
                                var t = e.msg || e.message || null;
                                t && toastr[e.success ? "success" : "error"](t), void 0 !== e.redirect && (toastr.info(Lang.get("messages.redirecting")), setTimeout(function() {
                                    window.location.href = e.redirect
                                }, 1e3 * (e.redirect_time || 0))), e.replaceUrl && goBackReplace(e.replaceUrl), "function" == typeof s && s(e)
                            },
                            error: function(e) {
                                void 0 !== e.responseJSON.errors && $.each(e.responseJSON.errors, function(e, t) {
                                    c.find('[name="'.concat(e, '"]')).after(errorLabel.format(e, t[0]))
                                }), toastr.error(Lang.get("messages.something_went_wrong") + " : " + e.responseJSON.message), setTimeout(function() {
                                    $.each(l, function() {
                                        $(this).button("reset")
                                    })
                                }, 1)
                            }
                        },
                        i = $.extend(!0, u, a);
                    $.each(l, function() {
                        $(this).button("loading")
                    });
                    var o = new Promise(function(e, t) {
                        return e(!0)
                    });
                    "function" == typeof r && (o = r()), o.then(function() {
                        $.ajax(i).always(function() {
                            setTimeout(function() {
                                $.each(l, function() {
                                    $(this).button("reset")
                                })
                            }, 1)
                        })
                    }).catch(function(e) {
                        toastr.error(e), setTimeout(function() {
                            $.each(l, function() {
                                $(this).button("reset")
                            })
                        }, 1)
                    })
                }
            };
        n && (i.rules = n || {}), a && (i.messages = a || {}), e.submit(function(e) {
            return e.preventDefault(), !1
        }).validate(i)
    },
    createBasicDataTable = function(r, e) {
        var t = 2 < arguments.length && void 0 !== arguments[2] && arguments[2],
            n = $.extend(!0, {
                ordering: !1,
                processing: !0,
                serverSide: !0,
                bRetrieve: !0,
                searching: !1,
                fixedHeader: !1,
                stateSave: !1,
                buttons: [],
                sDom: "Rfrtlip",
                columnDefs: [{
                    orderable: !1,
                    searchable: !1
                }],
                lengthMenu: [
                    [10, 20, 50, 100],
                    [10, 20, 50, 100]
                ],
                ajax: ""
            }, e || {});
        return n.hasOwnProperty("uKey") && n.uKey && (n.keys = {
            keys: [13, 38, 40],
            className: ""
        }), !n.hasOwnProperty("deferLoading") && t && (n.deferLoading = 0), $_dt = r.DataTable(n), n.hasOwnProperty("uKey") && n.uKey && ($("#search").on("focus", function(e) {
            r.DataTable().cell.blur()
        }), $_dt.on("key-focus.dt", function(e, t, n) {
            $(t.row(n.index().row).node()).addClass("selected")
        }), $_dt.on("key-blur.dt", function(e, t, n) {
            $(t.row(n.index().row).node()).removeClass("selected")
        }), $_dt.on("key.dt", function(e, t, n, a, i) {
            if (13 === n) {
                var o = a.index().row + 1,
                    s = $("tr:eq(" + o + ") a:first, tr:eq(" + o + ") button:first", r);
                0 < s.length && s.get(0).click()
            }
        }), $_dt.on("draw.dt", function(e, t) {
            null == t.uCellFocus && (t.uCellFocus = !0, r.DataTable().cell().focus())
        }), $(document).on("filter-filtered", function(e) {
            r.DataTable().settings()[0].uCellFocus = void 0
        })), n.hasOwnProperty("fixedHeader") && n.fixedHeader && new $.fn.dataTable.FixedHeader($_dt), $_dt
    },
    makeDatePicker = function(e, t) {
        var n = $.extend(!0, {}, t || {});
        return e.datepicker(n)
    };
$(".modal").on("shown.bs.modal", function() {
    $(".checkbox label:first-child").css("padding-left", "0px"), $(".modal").find('input[type="checkbox"].input-icheck').each(function() {
        $(this).iCheck({
            checkboxClass: "icheckbox_square-blue",
            radioClass: "iradio_square-blue"
        })
    }), $(".modal").find(".select2").each(function() {
        $(this).select2()
    })
});
var replaceUrl = function(e, t, n) {
        var a = e || new Url;
        "string" == typeof e && (a = new Url(e));
        var i = t || document.title,
            o = n || {};
        if ("undefined" != typeof history && void 0 !== history.replaceState) try {
            history.replaceState(o, i, a.toString())
        } catch (e) {
            console.error(e)
        }
    },
    defaultFileInputOptions = {
        hideThumbnailContent: !0,
        overwriteInitial: !1,
        dropZoneEnabled: !1,
        showUpload: !1,
        showPreview: !1,
        uploadLabel: Lang.get("lang_v1.general_upload"),
        uploadClass: "btn btn-success",
        browseLabel: Lang.get("lang_v1.general_browse"),
        browseClass: "btn btn-info",
        removeLabel: Lang.get("lang_v1.general_remove"),
        removeClass: "btn btn-danger",
        layoutTemplates: {
            main1: '\n            <div class="input-group {class}">\n            \t<div class="input-group-btn">\n                   \t{browse}\n               \t</div>\n               \t{caption}\n               \t<div class="input-group-btn">\n               \t\t{upload}\n               \t\t{remove}\n               \t</div>\n            </div>\n            '
        }
    },
    makeFileInput = function(e, t) {
        var n = $.extend(!0, defaultFileInputOptions, t || {});
        return e.fileinput(n)
    };
$(document).on("shown.bs.tab", '[data-toggle="tab"]', function() {
    var e = new Url,
        t = $(this),
        n = t.closest(".nav-tabs");
    if (n.attr("id") && (e.query[n.attr("id") + "_selectedtab"] = t.attr("href").replace("#", ""), replaceUrl(e), 0 < t.closest("form").length)) {
        var a = t.closest("form"),
            i = a.attr("action"),
            o = new Url(i);
        o.query[n.attr("id") + "_selectedtab"] = t.attr("href").replace("#", ""), a.attr("action", o)
    }
});
var getNotifications = function() {
        var e = new Date;
        (0 == notifyShowInfo.shown || e.getTime() - notifyShowInfo.when.getTime() > notifyShowInfo.timeout) && $.ajax({
            url: laroute.route("user.notifications"),
            dataType: "json",
            success: function(e) {
                notifyShowInfo.shown = !0, notifyShowInfo.when = new Date, 0 < e.length ? ($(".notifications-menu a.dropdown-toggle span.label").text(e.length), $(".notifications-menu ul.dropdown-menu li.header").text(Lang.get("user.has_notify", {
                    length: e.length
                })), e.forEach(function(e) {
                    var t;
                    t = "popup" !== e.target ? $('<li><a id="'.concat(e.id, '" href="').concat(e.target, '" title="').concat(e.title, '">\n\t\t\t\t\t\t\t\t<i class="fa fa-').concat(e.icon, " text-").concat(e.color, '"></i> ').concat(e.title, "\n\t\t\t\t\t\t\t</a></li>")) : $('<li><a id="'.concat(e.id, '" class="open_popup_notification" title="').concat(e.title, '">\n\t\t\t\t\t\t\t\t<i class="fa fa-').concat(e.icon, " text-").concat(e.color, '"></i> ').concat(e.title, "\n\t\t\t\t\t\t\t</a></li>")), $(".notifications-menu ul.menu").append(t)
                })) : $(".notifications-menu ul.dropdown-menu li.header").text(Lang.get("user.not_has_unread_notify"))
            }
        })
    },
    getNotificationsCount = function() {
        $.ajax({
            url: laroute.route("user.notifications.count"),
            dataType: "json",
            success: function(e) {
                $(".notifications-menu a.dropdown-toggle span.label").text(e), $(".notifications-menu ul.dropdown-menu li.header").text(Lang.get("user.has_notify", {
                    length: e
                }))
            }
        })
    },
    readAllNotifications = function() {
        $.ajax({
            url: laroute.route("user.notifications.read_all"),
            dataType: "json",
            success: function(e) {
                $(".notifications-menu a.dropdown-toggle span.label").text(0), $(".notifications-menu ul.dropdown-menu li.header").text(Lang.get("user.not_has_unread_notify")), $(".notifications-menu ul.menu").html("")
            }
        })
    };
$(function() {
    if ($(document).on("click", ".open_popup_notification", function() {
            var e = $(this).attr("id");
            $(".view_modal").load(laroute.route("user.notification_show", {
                id: e
            }), function() {
                $(this).modal("show"), $(this).on("hidden.bs.modal", function() {
                    $(this).html("")
                })
            })
        }), $(".notifications-menu").on("show.bs.dropdown", function() {
            getNotifications()
        }), 0 < $(".nav-tabs").length) {
        var e = new Url;
        $.each(e.query, function(e, t) {
            var n = e.replace("_selectedtab", ""),
                a = $("#" + n);
            if (0 < a.length) {
                var i = a.find('[href="#' + t + '"]') || a.find('[data-target="#' + t + '"]');
                i && setTimeout(function() {
                    i.tab("show")
                })
            }
        })
    }
    if (0 < $(".datepicker").length && $(".datepicker").each(function() {
            var e = $(this);
            makeDatePicker(e)
        }), 0 < $(".fileinput").length && $(".fileinput").each(function() {
            var e = $(this);
            makeFileInput(e, e.data())
        }), 0 < $(".select-2").length && $(".select-2").each(function() {
            var e = $(this);
            makeSelect2(e)
        }), 0 < $(".notifications-menu").length) {
        var t;
        window.addEventListener("focus", function() {
            t = window.setInterval(getNotificationsCount, notifyShowInfo.timeout)
        }), window.addEventListener("blur", function() {
            window.clearInterval(t)
        })
    }
    $(".notifications-menu a.read-all").on("click", function(e) {
        e.preventDefault(), readAllNotifications()
    }), 0 < $(".ajaxform").length && $(".ajaxform").each(function() {
        var e = $(this);
        createAjaxSubmitForm(e)
    }), $("#change_lang").change(function() {
        window.location = "?lang=" + this.value
    }), $(document).on("click", ".open--sms-dialog", function() {
        var e = $(this).data("num") || null;
        return $(".view_modal").load(laroute.route("dialog.sms_modal", {
            num: e
        }), function(e) {
            var t = $(this).find("#form-sms-dialog");
            createAjaxSubmitForm(t), $(this).modal("show");
            var n = $(this).find("#sms_body"),
                a = $(this).find("#sms_total_char_count"),
                i = $(this).find("#sms_count");
            n.on("keyup", function() {
                var e = this.value.length;
                if (a.html(e), 0 < e) {
                    for (var t in sms_count_by_chars)
                        if (e <= sms_count_by_chars[t]) {
                            i.html(parseInt(t) + 1);
                            break
                        }
                } else i.html("-")
            })
        }), $(".view_modal").on("hidden.bs.modal", function() {
            $(this).html("")
        }), !1
    }), $(".has-not-sms-service").on("click", function() {
        $(".view_modal").load(laroute.route("has.not.setting.sms"), function() {
            $(this).modal("show")
        })
    }), has_not_email_setting = function() {
        $(".view_modal").load(laroute.route("has.not.setting.email"), function() {
            $(this).modal("show")
        })
    }, $(document).on("click", "#tcmb_exchange_rates", function() {
        var e = $(this);
        return e.button("loading"), $.post(laroute.route("get_tcmb_exchange_rates")).done(function(e) {
            $.isEmptyObject(e) ? toastr.info(Lang.get("business.tcmb_exchange_rates_error")) : ($.each(e, function(e, t) {
                $('input:text[name="text_rate_' + e + '"]').val(t)
            }), toastr.success(Lang.get("business.tcmb_exchange_rates_success")))
        }).always(function() {
            e.button("reset")
        }), !1
    }), $(window).on("load", function() {
        var i = new Url;
        0 < $(".data-table").length && $.each($(".data-table"), function(e, t) {
            var n = $(t),
                a = n.data() || {},
                i = a.deferloading || !1;
            createBasicDataTable(n, a, i)
        }), void 0 !== $.fn.DataTable && $.fn.DataTable.tables.length && $.fn.DataTable.tables().forEach(function(t) {
            var n = $(t).DataTable(),
                e = i.query[t.id + "_page"],
                a = parseInt(e || 0);
            n.on("page.dt", function() {
                var e = n.page.info();
                _url = new URLSearchParams(window.location.search), _url.delete(t.id + "_page"), 0 < e.page && _url.append(t.id + "_page", e.page), replaceUrl(i.path + "?" + _url)
            }).on("xhr.dt", function() {
                0 < a && setTimeout(function() {
                    n.page(a).draw("page"), n.off("xhr.dt")
                }, 200)
            })
        })
    });
    var o = $("#search"),
        s = window.location.href,
        n = $(".sidebar-menu li ul li a").css("color");
    o.css({
        color: n
    });
    sideBarFuncMobile = function() {
        o.on("keyup", function() {
            $(".sidebar-menu li").hide();
            var n = $(this).val().toLowerCase().trim();
            n ? ($("#search-div > span").on("click", function() {
                o.val(""), $("#search-div > span i").removeClass("fa fa-times"), $("#search-div > span i").addClass("fa fa-search"), $(".sidebar-menu li").show(), $(".sidebar-menu li").removeClass("selected active"), $(".sidebar-menu li a").removeClass("focused"), $(".sidebar-menu li ul li").show(), $(".sidebar-menu li ul li a").filter(function(e, t) {
                    t.getAttribute("href") == s && ($(this).parent().parent().addClass("menu-open").show(), $(this).parent().addClass("active"))
                }), i.reset()
            }), $("#search-div > span i").removeClass("fa fa-search"), $("#search-div > span i").addClass("fa fa-times"), $(".sidebar-menu li ul li").each(function(e, t) {
                -1 < t.dataset.title.toLowerCase().indexOf(n) ? ($(this).parent().parent().show(), $(this).parent().parent().addClass("active"), $(this).show().addClass("selected")) : $(this).hide().removeClass("selected active")
            })) : ($("#search-div > span i").removeClass("fa fa-times"), $("#search-div > span i").addClass("fa fa-search"), $(".sidebar-menu li").show(), $(".sidebar-menu li").removeClass("active"), $(".sidebar-menu li ul li").show())
        });
        var e = $(".sidebar-menu"),
            t = -1,
            n = null,
            a = null,
            i = {
                getActiveLi: function() {
                    return e.find("li:not(:hidden)>a").filter(function(e, t) {
                        return "#" !== t.getAttribute("href")
                    })
                },
                move: function(e) {
                    switch (n || (n = i.getActiveLi()), $.each(n, function(e, t) {
                        $(t).parent().removeClass("focused")
                    }), e) {
                        case "up":
                            --t < 0 && (t = n.length - 1);
                            break;
                        case "down":
                            ++t > n.length - 1 && (t = 0)
                    }
                    a = n[t], $(a).parent().addClass("focused")
                },
                reset: function() {
                    t = -1, n = a = null, e.find("li").removeClass("focused selected")
                }
            }
    }, navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i) ? o.length && sideBarFuncMobile() : o.length && function() {
        shortcut.add("ctrl+space", function() {
            o.focus(), ($("body").hasClass("sidebar-collapse") || window.innerWidth < 769 && !$("body").hasClass("sidebar-open")) && $(".sidebar-toggle").trigger("click")
        }), o.on("keyup", function(e) {
            $(".sidebar-menu li").hide();
            var t = $(this).val().toLocaleLowerCase("tr-TR").trim();
            if (t) {
                $("#search-div > span").on("click", function() {
                    o.val(""), $("#search-div > span i").removeClass("fa fa-times"), $("#search-div > span i").addClass("fa fa-search"), $(".sidebar-menu li").show(), $(".sidebar-menu li").removeClass("selected active"), $(".sidebar-menu li a").removeClass("focused"), $(".sidebar-menu li ul li").show(), $(".sidebar-menu li ul li a").filter(function(e, t) {
                        t.getAttribute("href") == s && ($(this).parent().parent().addClass("menu-open").show(), $(this).parent().addClass("active"))
                    }), i.reset()
                }), $("#search-div > span i").removeClass("fa fa-search"), $("#search-div > span i").addClass("fa fa-times");
                var n = $(".sidebar-menu li ul li").map(function(e, t) {
                    return {
                        obj: this,
                        text: t.dataset.title.toLocaleLowerCase("tr-TR")
                    }
                }).toArray();
                n.forEach(function(e) {
                    $(e.obj).hide().removeClass("selected active")
                }), new Fuse(n, {
                    keys: ["text"],
                    threshold: .3,
                    minMatchCharLength: 3
                }).search(t).forEach(function(e) {
                    $(e.obj).parent().parent().show(), $(e.obj).parent().parent().addClass("active"), $(e.obj).show().addClass("selected")
                }), 1 === $(".sidebar-menu").find("li.selected").length && $(".sidebar-menu").find("li.selected").addClass("focused"), 38 == e.which ? i.move("up") : 40 == e.which && i.move("down")
            } else $("#search-div > span i").removeClass("fa fa-times"), $("#search-div > span i").addClass("fa fa-search"), $(".sidebar-menu li").show(), $(".sidebar-menu li").removeClass("active"), $(".sidebar-menu li ul li").show(), $(".sidebar-menu li ul li a").filter(function(e, t) {
                t.getAttribute("href") == s && ($(this).parent().parent().addClass("menu-open").show(), $(this).parent().addClass("active"))
            });
            27 == e.which && (o.val(""), o.keyup()), 8 != e.which && 46 != e.which || i.reset()
        });
        var e = $(".sidebar-menu"),
            t = -1,
            n = null,
            a = null,
            i = {
                getActiveLi: function() {
                    return e.find("li:not(:hidden)>a").filter(function(e, t) {
                        return "#" !== t.getAttribute("href")
                    })
                },
                move: function(e) {
                    switch (n || (n = i.getActiveLi()), $.each(n, function(e, t) {
                        $(t).parent().removeClass("focused")
                    }), e) {
                        case "up":
                            --t < 0 && (t = n.length - 1);
                            break;
                        case "down":
                            ++t > n.length - 1 && (t = 0)
                    }
                    a = n[t], $(a).parent().addClass("focused")
                },
                reset: function() {
                    t = -1, n = a = null, e.find("li").removeClass("focused selected")
                }
            };
        $("#search").on("keydown", function(e) {
            13 == e.which && a && (window.location = a.href)
        }), shortcut.add("escape", function() {
            i.reset(), o.val(""), o.focus()
        }, {
            disable_in_input: !0
        })
    }(), timeOutRemove = function() {
        var e = $(".js-close");
        setTimeout(function() {
            e.remove()
        }, 1e3 * parseInt(e.data("rmv"), 10))
    }, timeOutRemove(), makeMask(), "undefined" != typeof shortcut && shortcut.add("backspace", function(e) {
        window.history.back()
    }, {
        disable_in_input: !0
    })
});
var printErrorMsg = function(e) {
    $.each(e, function(e, t) {
        toastr.warning(t)
    })
};

function inArray(e, t) {
    for (var n = t.length, a = 0; a < n; a++)
        if (t[a] == e) return !0;
    return !1
}